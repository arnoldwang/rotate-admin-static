<script>
    var ko = require('knockout');
    var ajax = require('service/ajax');
    var teams;
    model = [
        require('./abstract-typeahead'),
        {
            bizId: function() {},

            source: function(keyword, callback) {
                var bizId = this.bizId();
                ajax({
                    url: '/team/queryAll',
                    data:{bizId:bizId},
                    success: function(items) {
                        teams = items.map(function(item) {
                            return {
                                value: item.teamId,
                                text: item.teamName,
                                territoryId: item.territoryId
                            }
                        });

                        callback(teams.filter(function(item) {
                            return item.text.indexOf(keyword) !== -1 && bizId;
                        }));
                    }
                });

            }
        }
    ]
</script>