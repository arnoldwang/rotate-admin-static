<div class="panel panel-default">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>
                    战区名称
                </th>
                <th style="width: 20%">
                    开始时间
                </th>
                <th style="width: 20%">
                    结束时间
                </th>
                <th style="width: 20%">
                    运行状态
                </th>
                <th style="width: 20%">
                    类型
                </th>
                <th style="width: 20%">
                    操作
                </th>
            </tr>
        </thead>
        <tbody data-bind="foreach: items,delegateEvent: {
            click: {
                '.editable': function(item) {
                    toListLeaf(item);
                }
            }
        }">
            <tr>
                <td>
                   {{territoryName}}                    
                </td>
                <td>
                    {{beginDate}}
                </td>
                <td>
                    {{endDate}}
                </td>
                <td>
                    {{runStatus|enums:'runStatus'}}
                </td>
                <td>
                    {{operateType}}
                </td>
                <td>
                <span class="editable">
                   查看 </span> 
                </td>
            </tr>
        </tbody>
    </table>
</div>


<script>
    var notification = require('service/notification');
    var kom = require('knockout.mapping');

    model = [
        function () {
            this.setData({
                items: []
            })
        },
        {
            onStateChange: function (query) {
                this.fetch({
                    url: '/territory/historyList',
                    data: {
                        pageSize: query.pageSize,
                        pageIndex: query.pageIndex
                    },
                    success: function (items) {
                        this.setData({
                            items: items
                        })
                    }
                });
            },
            toListLeaf: function(item) {
                console.log(item)
                this.modal({
                    data: kom.toJS(item),
                    target: require('./leaf-territory-history'),
                    confirm: function() {
                        
                    }
                })
            }
        }
    ]
</script>